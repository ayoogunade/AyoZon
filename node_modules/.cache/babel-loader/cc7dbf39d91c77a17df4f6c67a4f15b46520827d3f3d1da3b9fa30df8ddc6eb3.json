{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductList=()=>{const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[buyingProduct,setBuyingProduct]=useState(null);const[email,setEmail]=useState('');useEffect(()=>{const fetchProducts=async()=>{try{const response=await axios.get('http://localhost:5001/products');setProducts(response.data);setLoading(false);}catch(err){setError('Failed to fetch products');setLoading(false);}};fetchProducts();},[]);const handleBuyNow=async product=>{if(!email){alert('Please enter your email');return;}try{const response=await axios.post('http://localhost:5001/place_order',{email:email,product_id:product.id});alert('Order placed successfully! Check your email for confirmation.');setEmail('');setBuyingProduct(null);}catch(err){alert('Failed to place order. Please try again.');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-xl\",children:error})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-8\",children:\"Available Photos\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:products.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg shadow-lg p-4\",children:[product.image_url?/*#__PURE__*/_jsx(\"img\",{src:product.image_url,alt:product.name,className:\"w-[240px] h-[240px] object-cover rounded-md mb-4\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-[240px] h-[240px] bg-gray-200 rounded-md mb-4 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"No image available\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-2\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:product.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-bold\",children:[\"$\",product.price]}),(buyingProduct===null||buyingProduct===void 0?void 0:buyingProduct.id)===product.id?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Enter your email\",className:\"px-3 py-2 border rounded\",value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors flex-1\",onClick:()=>handleBuyNow(product),children:\"Confirm Purchase\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition-colors\",onClick:()=>setBuyingProduct(null),children:\"Cancel\"})]})]}):/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors\",onClick:()=>setBuyingProduct(product),children:\"Buy Now\"})]})]},product.id))})]});};export default ProductList;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","ProductList","products","setProducts","loading","setLoading","error","setError","buyingProduct","setBuyingProduct","email","setEmail","fetchProducts","response","get","data","err","handleBuyNow","product","alert","post","product_id","id","className","children","map","image_url","src","alt","name","description","price","type","placeholder","value","onChange","e","target","onClick"],"sources":["/Users/ayoogunade/Desktop/amazon-clone/src/components/ProductList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst ProductList = () => {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [buyingProduct, setBuyingProduct] = useState(null);\n  const [email, setEmail] = useState('');\n\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const response = await axios.get('http://localhost:5001/products');\n        setProducts(response.data);\n        setLoading(false);\n      } catch (err) {\n        setError('Failed to fetch products');\n        setLoading(false);\n      }\n    };\n\n    fetchProducts();\n  }, []);\n\n  const handleBuyNow = async (product) => {\n    if (!email) {\n      alert('Please enter your email');\n      return;\n    }\n\n    try {\n      const response = await axios.post('http://localhost:5001/place_order', {\n        email: email,\n        product_id: product.id\n      });\n      \n      alert('Order placed successfully! Check your email for confirmation.');\n      setEmail('');\n      setBuyingProduct(null);\n    } catch (err) {\n      alert('Failed to place order. Please try again.');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center min-h-screen\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex justify-center items-center min-h-screen\">\n        <div className=\"text-red-500 text-xl\">{error}</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h1 className=\"text-3xl font-bold mb-8\">Available Photos</h1>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {products.map((product) => (\n          <div key={product.id} className=\"border rounded-lg shadow-lg p-4\">\n            {product.image_url ? (\n              <img\n                src={product.image_url}\n                alt={product.name}\n                className=\"w-[240px] h-[240px] object-cover rounded-md mb-4\"\n              />\n            ) : (\n              <div className=\"w-[240px] h-[240px] bg-gray-200 rounded-md mb-4 flex items-center justify-center\">\n                <span className=\"text-gray-500\">No image available</span>\n              </div>\n            )}\n            <h2 className=\"text-xl font-semibold mb-2\">{product.name}</h2>\n            <p className=\"text-gray-600 mb-4\">{product.description}</p>\n            <div className=\"flex flex-col gap-4\">\n              <span className=\"text-lg font-bold\">${product.price}</span>\n              {buyingProduct?.id === product.id ? (\n                <div className=\"flex flex-col gap-2\">\n                  <input\n                    type=\"email\"\n                    placeholder=\"Enter your email\"\n                    className=\"px-3 py-2 border rounded\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                  />\n                  <div className=\"flex gap-2\">\n                    <button \n                      className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors flex-1\"\n                      onClick={() => handleBuyNow(product)}\n                    >\n                      Confirm Purchase\n                    </button>\n                    <button \n                      className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition-colors\"\n                      onClick={() => setBuyingProduct(null)}\n                    >\n                      Cancel\n                    </button>\n                  </div>\n                </div>\n              ) : (\n                <button \n                  className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors\"\n                  onClick={() => setBuyingProduct(product)}\n                >\n                  Buy Now\n                </button>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default ProductList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}