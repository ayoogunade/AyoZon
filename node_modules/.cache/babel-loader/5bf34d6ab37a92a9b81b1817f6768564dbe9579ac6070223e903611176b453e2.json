{"ast":null,"code":"var _jsxFileName = \"/Users/ayoogunade/Desktop/amazon-clone/src/components/CheckoutForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useStripe, useElements, CardElement } from '@stripe/react-stripe-js';\nimport axios from 'axios';\nimport TestCardInfo from './TestCardInfo';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CARD_ELEMENT_OPTIONS = {\n  style: {\n    base: {\n      color: '#424770',\n      fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',\n      fontSmoothing: 'antialiased',\n      fontSize: '16px',\n      '::placeholder': {\n        color: '#aab7c4'\n      }\n    },\n    invalid: {\n      color: '#9e2146',\n      iconColor: '#9e2146'\n    }\n  }\n};\nconst CheckoutForm = ({\n  product,\n  email,\n  onSuccess,\n  onCancel\n}) => {\n  _s();\n  const stripe = useStripe();\n  const elements = useElements();\n  const [error, setError] = useState(null);\n  const [processing, setProcessing] = useState(false);\n  const [succeeded, setSucceeded] = useState(false);\n  const handleSubmit = async event => {\n    event.preventDefault();\n    if (!stripe || !elements) {\n      return;\n    }\n    setProcessing(true);\n    setError(null);\n    try {\n      // Create payment intent\n      const {\n        data\n      } = await axios.post('http://localhost:5002/create-payment-intent', {\n        product_id: product.id,\n        email: email\n      });\n\n      // Confirm payment\n      const result = await stripe.confirmCardPayment(data.client_secret, {\n        payment_method: {\n          card: elements.getElement(CardElement),\n          billing_details: {\n            email: email\n          }\n        }\n      });\n      if (result.error) {\n        setError(result.error.message);\n        setProcessing(false);\n      } else {\n        // Payment succeeded\n        await axios.post('http://localhost:5002/confirm-payment', {\n          payment_intent_id: result.paymentIntent.id\n        });\n        setSucceeded(true);\n        setProcessing(false);\n        onSuccess(result.paymentIntent);\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Payment failed');\n      setProcessing(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-md mx-auto bg-white p-6 rounded-lg shadow-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-xl font-semibold mb-4\",\n      children: \"Complete Your Purchase\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4 p-4 bg-gray-50 rounded\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Product:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 12\n        }, this), \" \", product.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Price:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 12\n        }, this), \" $\", product.price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 12\n        }, this), \" \", email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(TestCardInfo, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm font-medium text-gray-700 mb-2\",\n          children: \"Card details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 border border-gray-300 rounded-md\",\n          children: /*#__PURE__*/_jsxDEV(CardElement, {\n            options: CARD_ELEMENT_OPTIONS\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this), succeeded && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded\",\n        children: \"Payment succeeded! Check your email for confirmation.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: !stripe || processing || succeeded,\n          className: `flex-1 py-2 px-4 rounded font-medium ${!stripe || processing || succeeded ? 'bg-gray-400 cursor-not-allowed' : 'bg-blue-500 hover:bg-blue-600 text-white'}`,\n          children: processing ? 'Processing...' : `Pay $${product.price}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: onCancel,\n          disabled: processing,\n          className: \"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 disabled:bg-gray-400\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n_s(CheckoutForm, \"/1FXBerNWoc+yf52U3G9a6J2J+E=\", false, function () {\n  return [useStripe, useElements];\n});\n_c = CheckoutForm;\nexport default CheckoutForm;\nvar _c;\n$RefreshReg$(_c, \"CheckoutForm\");","map":{"version":3,"names":["React","useState","useStripe","useElements","CardElement","axios","TestCardInfo","jsxDEV","_jsxDEV","CARD_ELEMENT_OPTIONS","style","base","color","fontFamily","fontSmoothing","fontSize","invalid","iconColor","CheckoutForm","product","email","onSuccess","onCancel","_s","stripe","elements","error","setError","processing","setProcessing","succeeded","setSucceeded","handleSubmit","event","preventDefault","data","post","product_id","id","result","confirmCardPayment","client_secret","payment_method","card","getElement","billing_details","message","payment_intent_id","paymentIntent","err","_err$response","_err$response$data","response","className","children","fileName","_jsxFileName","lineNumber","columnNumber","name","price","onSubmit","options","type","disabled","onClick","_c","$RefreshReg$"],"sources":["/Users/ayoogunade/Desktop/amazon-clone/src/components/CheckoutForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  useStripe,\n  useElements,\n  CardElement\n} from '@stripe/react-stripe-js';\nimport axios from 'axios';\nimport TestCardInfo from './TestCardInfo';\n\nconst CARD_ELEMENT_OPTIONS = {\n  style: {\n    base: {\n      color: '#424770',\n      fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',\n      fontSmoothing: 'antialiased',\n      fontSize: '16px',\n      '::placeholder': {\n        color: '#aab7c4'\n      }\n    },\n    invalid: {\n      color: '#9e2146',\n      iconColor: '#9e2146'\n    }\n  }\n};\n\nconst CheckoutForm = ({ product, email, onSuccess, onCancel }) => {\n  const stripe = useStripe();\n  const elements = useElements();\n  const [error, setError] = useState(null);\n  const [processing, setProcessing] = useState(false);\n  const [succeeded, setSucceeded] = useState(false);\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    if (!stripe || !elements) {\n      return;\n    }\n\n    setProcessing(true);\n    setError(null);\n\n    try {\n      // Create payment intent\n      const { data } = await axios.post('http://localhost:5002/create-payment-intent', {\n        product_id: product.id,\n        email: email\n      });\n\n      // Confirm payment\n      const result = await stripe.confirmCardPayment(data.client_secret, {\n        payment_method: {\n          card: elements.getElement(CardElement),\n          billing_details: {\n            email: email,\n          },\n        }\n      });\n\n      if (result.error) {\n        setError(result.error.message);\n        setProcessing(false);\n      } else {\n        // Payment succeeded\n        await axios.post('http://localhost:5002/confirm-payment', {\n          payment_intent_id: result.paymentIntent.id\n        });\n        \n        setSucceeded(true);\n        setProcessing(false);\n        onSuccess(result.paymentIntent);\n      }\n    } catch (err) {\n      setError(err.response?.data?.error || 'Payment failed');\n      setProcessing(false);\n    }\n  };\n\n  return (\n    <div className=\"max-w-md mx-auto bg-white p-6 rounded-lg shadow-lg\">\n      <h3 className=\"text-xl font-semibold mb-4\">Complete Your Purchase</h3>\n      \n      <div className=\"mb-4 p-4 bg-gray-50 rounded\">\n        <p><strong>Product:</strong> {product.name}</p>\n        <p><strong>Price:</strong> ${product.price}</p>\n        <p><strong>Email:</strong> {email}</p>\n      </div>\n\n      <form onSubmit={handleSubmit}>\n        <TestCardInfo />\n        \n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Card details\n          </label>\n          <div className=\"p-3 border border-gray-300 rounded-md\">\n            <CardElement options={CARD_ELEMENT_OPTIONS} />\n          </div>\n        </div>\n\n        {error && (\n          <div className=\"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded\">\n            {error}\n          </div>\n        )}\n\n        {succeeded && (\n          <div className=\"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded\">\n            Payment succeeded! Check your email for confirmation.\n          </div>\n        )}\n\n        <div className=\"flex gap-3\">\n          <button\n            type=\"submit\"\n            disabled={!stripe || processing || succeeded}\n            className={`flex-1 py-2 px-4 rounded font-medium ${\n              !stripe || processing || succeeded\n                ? 'bg-gray-400 cursor-not-allowed'\n                : 'bg-blue-500 hover:bg-blue-600 text-white'\n            }`}\n          >\n            {processing ? 'Processing...' : `Pay $${product.price}`}\n          </button>\n          \n          <button\n            type=\"button\"\n            onClick={onCancel}\n            disabled={processing}\n            className=\"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 disabled:bg-gray-400\"\n          >\n            Cancel\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default CheckoutForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}